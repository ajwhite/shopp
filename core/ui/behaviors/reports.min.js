jQuery(document).ready(function(){var g=jqnc(),j,c=null;function n(o){if(this.value==""){match=false}if(this.value.match(/^(\d{6,8})/)){match=this.value.match(/(\d{1,2}?)(\d{1,2})(\d{4,4})$/)}else{if(this.value.match(/^(\d{1,2}.{1}\d{1,2}.{1}\d{4})/)){match=this.value.match(/^(\d{1,2}).{1}(\d{1,2}).{1}(\d{4})/)}}if(match){date=new Date(match[3],(match[1]-1),match[2]);g(this).val((date.getMonth()+1)+"/"+date.getDate()+"/"+date.getFullYear());h.val("custom")}}var h=g("#range"),a=g("#start").change(n),f=g('<div id="start-calendar" class="calendar"></div>').appendTo("#wpwrap").PopupCalendar({scheduling:false,input:a}).bind("calendarSelect",function(){h.val("custom")}),e=g("#end").change(n),i=g('<div id="end-calendar" class="calendar"></div>').appendTo("#wpwrap").PopupCalendar({scheduling:true,input:e,scheduleAfter:f}).bind("calendarSelect",function(){h.val("custom")});h.change(function(){var p=new Date(),q=new Date(p.getFullYear(),p.getMonth(),p.getDate()),o=new Date(p.getFullYear(),p.getMonth(),p.getDate());p=new Date(p.getFullYear(),p.getMonth(),p.getDate());switch(g(this).val()){case"week":q.setDate(p.getDate()-p.getDay());o=new Date(q.getFullYear(),q.getMonth(),q.getDate()+6);break;case"month":q.setDate(1);o=new Date(q.getFullYear(),q.getMonth()+1,0);break;case"quarter":quarter=Math.floor(p.getMonth()/3);q=new Date(p.getFullYear(),p.getMonth()-(p.getMonth()%3),1);o=new Date(p.getFullYear(),q.getMonth()+3,0);break;case"year":q=new Date(p.getFullYear(),0,1);o=new Date(p.getFullYear()+1,0,0);break;case"yesterday":q.setDate(p.getDate()-1);o.setDate(p.getDate()-1);break;case"lastweek":q.setDate(p.getDate()-p.getDay()-7);o.setDate((p.getDate()-p.getDay()+6)-7);break;case"last30":q.setDate(p.getDate()-30);o.setDate(p.getDate());break;case"last90":q.setDate(p.getDate()-90);o.setDate(p.getDate());break;case"lastmonth":q=new Date(p.getFullYear(),p.getMonth()-1,1);o=new Date(p.getFullYear(),p.getMonth(),0);break;case"lastquarter":q=new Date(p.getFullYear(),(p.getMonth()-(p.getMonth()%3))-3,1);o=new Date(p.getFullYear(),q.getMonth()+3,0);break;case"lastyear":q=new Date(p.getFullYear()-1,0,1);o=new Date(p.getFullYear(),0,0);break;case"lastexport":q=lastexport;o=p;break;case"custom":return;break}f.select(q);i.select(o)}).change();function k(q){var o=[];var r=new Date(q.xaxis.min);r.setUTCDate(r.getUTCDate()-((r.getUTCDay()+1)%7));r.setUTCSeconds(0);r.setUTCMinutes(0);r.setUTCHours(0);var p=r.getTime();do{o.push({xaxis:{from:p,to:p+2*24*60*60*1000}});p+=7*24*60*60*1000}while(p<q.xaxis.max);return o}function b(o){if(!co){return}co.grid.markings=k;if("asMoney"==co.yaxis.tickFormatter){co.yaxis.tickFormatter=asMoney}if("asMoney"==co.xaxis.tickFormatter){co.xaxis.tickFormatter=asMoney}if(o[0]&&o[0]["data"].length>0){g.plot(g("#chart"),o,co)}}function m(o){g("#map").vectorMap({map:"world_mill_en",series:{regions:[{values:o,scale:["#E9FFBA","#618C03"],normalizeFunction:"polynomial"}]},onRegionLabelShow:function(r,p,q){p.html("<strong>"+asMoney(o[q])+"</strong> "+p.html())},backgroundColor:"transparent",regionStyle:{initial:{fill:"#d2d2d2"}}})}function l(o,q,p){g('<div id="tooltip">'+p+"</div>").css({position:"absolute",display:"none",top:q-40,left:o+10,border:"1px solid #dfdfdf",borderRadius:"3px",boxShadow:"1px 2px 3px #777",padding:"2px",backgroundColor:"#fff",opacity:0.9}).appendTo("body").show()}g("#chart").bind("plothover",function(q,s,p){g("#x").text(s.x.toFixed(2));g("#y").text(s.y.toFixed(2));if(p){if(c!=p.datapoint){c=p.datapoint;g("#tooltip").remove();var o=p.datapoint[0],r=p.datapoint[1];if(co.yaxis.tickFormatter==asMoney){r=asMoney(p.datapoint[1])}l(p.pageX,p.pageY,"<strong>"+r+"</strong> "+p.series.label)}}else{g("#tooltip").remove();c=null}});if(g("#chart").length>0){b(d)}if(g("#map").length>0){m(d)}g("#export-settings-button").click(function(){g("#export-settings-button").hide();g("#export-settings").removeClass("hidden")});g("#selectall_columns").change(function(){if(g(this).attr("checked")){g("#export-columns input").not(this).attr("checked",true)}else{g("#export-columns input").not(this).attr("checked",false)}});g("input.current-page").unbind("mouseup.select").bind("mouseup.select",function(){this.select()})});