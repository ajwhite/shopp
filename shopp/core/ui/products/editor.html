<div class="wrap"> 

<h2>Product Editor</h2> 

<!-- <ul class="subsubsub">
	<li><a href="#options">Options</a> |</li>
	<li><a href="#pricing">Pricing</a></li>
</ul> -->

<div id="ajax-response"></div> 

<form name="product" id="product" action="?page=<?php echo $this->Admin->products; ?>&amp;edit=<?php echo $_GET['edit']; ?>" method="post" enctype="multipart/form-data">
	<table class="form-table"> 
	<tbody>
		<tr class="form-field form-required"> 
			<th scope="row" valign="top"><label for="name">Product Name</label></th> 
			<td><input name="name" id="name" type="text" value="<? echo $Product->name ?>" size="40" tabindex="1" /><br /> 
            The name of the product to be displayed in the catalog, shopping cart and order reciept.</td> 
		</tr>
		<tr class="form-field"> 
			<th scope="row" valign="top"><label for="summary">Summary</label></th> 
			<td><textarea name="summary" id="summary" rows="2" cols="50" tabindex="2" style="width: 97%;"><? echo $Product->summary ?></textarea><br /> 
            A brief description of the product to draw the customer's attention.</td> 
		</tr> 
		<tr class="form-field"> 
			<th scope="row" valign="top"><label for="description">Description</label></th> 
			<td><textarea name="description" id="description" rows="8" cols="50" tabindex="3" style="width: 97%;"><? echo $Product->description ?></textarea><br /> 
            Provide in-depth information about the product to be displayed on the product page.</td> 
		</tr> 
		<tr class="form-field">
			<th><label>Details &amp; Specs</label>
				<div id="new-detail">
				<button type="button" id="addDetail" class="button-secondary"><small>Add Product Detail</small></button>
				</div>
			</th>
			<td>
				<ul class="details multipane">
					<li><input type="hidden" name="deletedSpecs" id="deletedSpecs" value="" />
						<div id="details-menu" class="multiple-select menu"><ul></ul></div></li>
					<li><div id="details-list" class="list"><ul></ul></div></li>
				</ul>
				<div class="clear"></div>
				Build a list of detailed information or such as dimensions or features of the product.
			</td>
		</tr>		
		<tr class="form-field">
			<th scope="row" valign="top"><label for="category-menu">Categories</label>
				<div id="new-category">
				<input type="text" name="new-category" value="" size="15" id="new-category" /><br />
				<select name="new-category-parent"><?php echo $categories_menu; ?></select>
				<button id="add-new-category" type="button" class="button-secondary" tabindex="5"><small>Add New Category</small></button>
				</div>
				</th> 
			<td> 
				<div id="category-menu" class="multiple-select short">
					<ul>
						<?php $depth = 0; foreach ($categories as $category): 
						if ($category->depth > $depth) echo "<li><ul>"; ?>
						<?php if ($category->depth < $depth): ?>
							<?php for ($i = $category->depth; $i < $depth; $i++): ?>
								</ul></li>
							<?php endfor; ?>
						<?php endif; ?>
						<li id="category-element-<?php echo $category->id; ?>"><input type="checkbox" name="categories[]" value="<?php echo $category->id; ?>" id="category-<?php echo $category->id; ?>" tabindex="4"<?php if (in_array($category->id,$selectedCategories)) echo ' checked="checked"'; ?> /><label for="category-<?php echo $category->id; ?>"><?php echo $category->name; ?></label></li>
						<?php $depth = $category->depth; endforeach; ?>
						<?php for ($i = 0; $i < $depth; $i++): ?>
							</ul></li>
						<?php endfor; ?>
					</ul>
				</div><br />
                You can organize products into categories for display in your catalog.</td> 
		</tr>
		<tr id="product-images" class="form-field form-required"> 
			<th scope="row" valign="top"><label>Product Images</label>
				<div>
				<input type="hidden" name="product" value="<?php echo $_GET['edit']; ?>" id="image-product-id" />
				<input type="hidden" name="deleteImages" id="deleteImages" value="" />
				<button type="button" class="button-secondary" name="add-image" id="add-product-image" tabindex="6"><small>Add New Image</small></button></div></th> 
			<td>
				<ul id="lightbox">
				<?php foreach ($Images as $thumbnail): ?>
					<li id="image-<?php echo $thumbnail->src; ?>"><input type="hidden" name="images[]" value="<?php echo $thumbnail->src; ?>" /><img src="<?php echo get_option('siteurl'); ?>/wp-admin/admin.php?page=shopp/lookup&amp;id=<?php echo $thumbnail->id; ?>" width="96" height="96" />
						<button type="button" name="deleteImage" value="<?php echo $thumbnail->src; ?>" title="Delete product image&hellip;" class="deleteButton"><img src="<?php echo SHOPP_PLUGINURI; ?>/core/ui/icons/delete.png" alt="-" width="16" height="16" /></button></li>
				<?php endforeach; ?>
				</ul>
				<div class="clear"></div>
				Images shown here will be out of proportion, but will be correctly sized for shoppers.
			</td> 
		</tr>
		<tr class="form-field"> 
			<th scope="row" valign="top"><label for="featured">Settings</label></th> 
			<td><p><input type="hidden" name="featured" value="off" /><input type="checkbox" name="featured" value="on" id="featured" <?php if ($Product->featured == "on") echo ' checked="checked"'?> /><label for="featured"> Featured Product</label></p>
				<ul>
					<li><input type="hidden" name="variations" value="off" /><input type="checkbox" name="variations" value="on" id="variations-setting"<?php if ($Product->variations == "on") echo ' checked="checked"'?> /><label for="variations-setting"> Variations &mdash; Selectable product options</label></li>
					<li><input type="hidden" name="addons" value="off" /><input type="checkbox" name="addons" value="on" id="addons-setting"<?php if ($Product->addons == "on") echo ' checked="checked"'?> /><label for="addons-setting"> Add-ons &mdash; Build-to-order product additions</label></li>
				</ul>
				</td>
		</tr>
	</tbody>
	<tbody id="product-pricing">
	</tbody>
	</table>
	
	<div id="variations">
	<h3>Variations</h3>
	<table class="form-table pricing">
	<tbody>
		<tr>
			<th>Options</th>
			<td>
				<ul class="multipane">
					<li><div id="variations-menu" class="multiple-select options menu"><ul></ul></div>
					<div class="controls">
						<button type="button" id="addVariationMenu" class="button-secondary"><img src="<?php echo SHOPP_PLUGINURI; ?>/core/ui/icons/add.png" alt="-" width="16" height="16" /><small> Add Option Menu</small></button>
					</div>
				</li>
				
				<li>
					<div id="variations-list" class="multiple-select options"></div><br />
					<div class="controls right">
					<button type="button" id="addVariationOption" class="button-secondary"><img src="<?php echo SHOPP_PLUGINURI; ?>/core/ui/icons/add.png" alt="-" width="16" height="16" /><small> Add Option</small></button>
					</div>
				</li>
				</ul>
			</td>
		</tr>
	</tbody>
	<tbody id="variations-pricing"></tbody>
	</table>
	</div>
	
	<div id="addons">
	<h3>Add-ons</h3>
	<table class="form-table pricing">
	<tbody>
		<tr>
			<th>Options</th>
			<td>
				<ul class="multipane">
					<li><div id="addons-menu" class="multiple-select options menu"><ul></ul></div>
					<div class="controls">
						<button type="button" id="addAddonMenu" class="button-secondary"><img src="<?php echo SHOPP_PLUGINURI; ?>/core/ui/icons/add.png" alt="-" width="16" height="16" /><small> Add Option Menu</small></button>
					</div></li>
					
					<li>	
					<div id="addons-list" class="multiple-select options"></div><br />
					<div class="controls right">
					<button type="button" id="addAddonOption" class="button-secondary"><img src="<?php echo SHOPP_PLUGINURI; ?>/core/ui/icons/add.png" alt="-" width="16" height="16" /><small> Add Option</small></button>
					</div>
					</li>
				</ul>
				
			</td>
		</tr>		
	</tbody>
	<tbody id="addons-pricing"></tbody>
	</table>
	</div>
	
	<div><input type="hidden" name="deletePrices" id="deletePrices" value="" />
		<input type="hidden" name="prices" value="" id="prices" /></div>
		
	
	<p class="submit"><input type="submit" class="button" name="save" value="Save Product" /></p>
</form>

</div>

<script type="text/javascript">
var prices = <?php echo json_encode($Product->prices) ?>;
var specs = <?php echo json_encode($Product->specs) ?>;
var options = <?php echo json_encode($Product->options) ?>;
var priceTypes = <?php echo json_encode($priceTypes) ?>;
var shiprates = <?php echo json_encode($shiprates); ?>;
var rsrcdir = '<?php echo SHOPP_PLUGINURI; ?>';
var siteurl = '<?php echo get_option('siteurl'); ?>';
var filesizeLimit = <?php echo wp_max_upload_size(); ?>;
var weightUnit = '<?php echo $this->Settings->get('weight_unit'); ?>';
init();
</script>